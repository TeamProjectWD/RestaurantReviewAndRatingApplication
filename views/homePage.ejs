<% if (message != '') { %>
    <div class="flash <%= message[0].type %> fade">
        <p>
            <%= message[0].text %>
        </p>
    </div>
<% } %>



<link rel="stylesheet" href="/assets/css/homePage.css">
<link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&&display=swap" rel="stylesheet">

<!-- <link rel="stylesheet" href="../assets/css/homeBg.css"> -->

<div id="mainDiv"  >

    <!-- sidebar -->
    <nav class="main-menu" style=" position: fixed;">
        <ul style="padding-top: 45px;">
            <li >
                <a href="/"  data-toggle="tooltip" title="Home">
                    <i class="fa fa-home fa-2x"></i>
                    <span class="nav-text">
                       Home
                    </span>
                </a>
              
            </li>
            <!-- <li>
                    <i class="fa fa-user fa-2x"></i>
                    
                </a>
            </li> -->

            <li class="open-popup5" title="Users" >
                <a  href="#">
                     <!-- <i class="fa fa-map-marker fa-2x"></i> -->
                     <i class="fa fa-users fa-2x"></i> 
                     <span class="nav-text">
                        Users
                     </span>                    
                 </a>
             </li>
             
            <li class="open-popup6" title="Hotels" >
                <a href="#">
                   <!-- <i class="fa fa-info "></i> -->
                   <!-- <i class="fa fa-h-square fa-2x" aria-hidden="true"></i> -->
                   <i class="fa fa-bell-concierge fa-2x"></i>
                   <span  class="nav-text">Hotels</span>
                </a>
            </li>
            <li class="open-popup7" title="Feature/Bug" >
                <a href="#">
                     <!-- <i class="fa fa-map-marker fa-2x"></i> -->
                     <i class="fa fa-screwdriver-wrench fa-2x"></i>   
                     <span  class="nav-text">Feature</span>                    
                 </a>
             </li>
             <li title="Developer" >
                <a href="/developer">
                     <!-- <i class="fa fa-map-marker fa-2x"></i> -->
                     <i class="fa fa-microchip fa-2x"></i>
                     <span  class="nav-text">Developer</span>                    
                 </a>
             </li>
        </ul>

        <ul class="logout">
            <li>
               <a data-toggle="modal" data-target="#exampleModalLogout" href="#"  title="Logout">
                     <i class="fa fa-power-off fa-2x"></i>
                     <span class="nav-text">
                        Logout
                     </span>
                </a>
            </li>  
        </ul>
    </nav>

    <!-- end of sidebar -->

    <!-- List for users-->
    <div style="z-index: 999999;" id="popup-container5">
        <div id="popup-form5">
            <a  id="close-popup5">&times;</a> 
            <div  class="containerForUsers" style="margin-top: 15px;" >
                <div style="text-align: center; font-size: 20px; margin-bottom: 25px; ">
                    <p class="formText someRandomClass"  style="color: rgb(5, 241, 241); font-family: monospace;">--- Users in RRR --- </p>
                </div>
                <hr style="border: 1px solid aliceblue;">
                    <div class="user-container">
                        <% for (var item1 of users){ %>
                            <div class="user-card" style="cursor: pointer;" onclick="location.href='/user/profile/<%=item1.id%>'">
                                <img src="<%=item1.avatar%>" alt="" class="user-image">
                                <h3 class="user-name"><%=item1.name%></h3>
                            </div>
                            
                        <%}%>
                    </div>
                </div>
            </div>
    </div>


  <!-- List for hotels-->
  <div style="z-index: 999999;" id="popup-container6">
    <div id="popup-form6">
        <a  id="close-popup6">&times;</a> 
        <div  class="containerForHotel" style="margin-top: 15px;" >
            <div style="text-align: center; font-size: 20px; margin-bottom: 25px; ">
                <p class="formText someRandomClass"  style="color: rgb(5, 241, 241); font-family: monospace;">--- Hotels in RRR --- </p>
            </div>
            <hr style="border: 1px solid aliceblue;">
                <div class="user-container">
                    <% for (var item2 of  hotelNames){ %>
                        <div class="user-card" style="cursor: pointer;" onclick="location.href='/hotel/profile/<%=item2.id%>'">
                            <img src="<%=item2.avatar%>" alt="" class="user-image">
                            <h3 class="user-name"><%=item2.name%></h3>
                        </div>
                        
                    <%}%>
                </div>
        </div>
    </div>
   </div>
  


    <!-- <div style="width: 100%; padding-top: 100px;" >
          
        <button id="open-popup4" class="btn btn-primary" style="width:100px;">Post</button>
    </div> -->
    <div style="text-align: center; padding-top: 100px;">
        <button id="open-popup4" class='glowing-btn'><span class='glowing-txt'>P<span class='faulty-letter'>O</span>ST</span></button>
    </div>

     <div class="dropleft" style="position: absolute; top: 103px; right: 30px; cursor: pointer;">
         <div title="location" class='glowing-txt ' id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style=" perspective: 2em; color:rgba(97,239,255,1);">
             <!-- <i class="fas fa-map-marker-alt"></i> -->
             <i class="fas fa-location"></i>
         </div>   
         <div style="background-color: rgb(10,10,10); width: 200px; text-align: center;" class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <div class="dropdown-item locationDropDown" style="display: flex; justify-content: space-evenly; cursor: default;">
                <div style="color: white; align-self: center;">
                    <i class="fas fa-globe-europe"></i>
                </div>
                <div style="color: white;">
                    Choose-Location
                </div>
            </div>
            <% if(typeOfUser=='User' || typeOfUser=='Admin'){%>

                <% for(var dist of allDistricts){ %>
                    <% if(dist.id == presentDistrict){%>
                        <hr style="margin-top: 5px; margin-bottom: 5px; opacity: 1; color: #a09c9c66;">
                        <div class="dropdown-item locationDropDown" style="color:rgba(246, 48, 34, 0.621); cursor: pointer;"  onclick="location.href='/user/changeDistrict/<%=dist.id%>'">
                            <%=dist.name%>
                        </div>    
                    <%}
                    else{%>
                        <hr style="margin-top: 5px; margin-bottom: 5px; opacity: 1; color: #a09c9c66;">
                        <div class="dropdown-item locationDropDown" style="color:aliceblue; cursor: pointer;"  onclick="location.href='/user/changeDistrict/<%=dist.id%>'">
                            <%=dist.name%>
                        </div>
                    <%}%>
    
                <%}%>
    
            <%}
            else{%>

                <% for(var dist of allDistricts){ %>
                    <% if(dist.id == presentDistrict){%>
                        <hr style="margin-top: 5px; margin-bottom: 5px; opacity: 1; color: #a09c9c66;">
                        <div class="dropdown-item locationDropDown" style="color:rgba(246, 48, 34, 0.621); cursor: pointer;"  onclick="location.href='/?distId=<%=dist.id%>'">
                            <%=dist.name%>
                        </div>    
                    <%}
                    else{%>
                        <hr style="margin-top: 5px; margin-bottom: 5px; opacity: 1; color: #a09c9c66;">
                        <div class="dropdown-item locationDropDown" style="color:aliceblue; cursor: pointer;"  onclick="location.href='/?distId=<%=dist.id%>'">
                            <%=dist.name%>
                        </div>
                    <%}%>
    
                <%}%>
                
            <%}%>

            
            <!-- <hr>
            <div class="dropdown-item">
                Choose-Location
            </div>
            <hr>

            <div class="dropdown-item">
                Choose-Location
            </div> -->
          </div>
     </div>
     
     <!-- for admin -->
     <%if(locals.user.isAdmin==true){ %>
        <div  style="position: absolute; top: 104px; right: 100px; cursor: pointer;" onclick="location.href='/admin/dashboard'">
           <div style="color: aliceblue;">
               <i class="fas fa-fingerprint"></i>
           </div>
        </div>
     <%}%>

     
     <%if(typeOfUser == "User"){%>
        <div style="z-index: 999999;" id="popup-container4">
            <div id="popup-form4">
               <a  id="close-popup4">&times;</a> 
                    <div  class="container" style="margin-top: 20px;" >
                    <form action="/posts/?type=<%=typeOfUser%>" id="postForm4" method="POST"  autocomplete="off" enctype="multipart/form-data" >
                        <div  >
                            <div class="">
                                <div style="text-align: center;">
                                    <p class="formText" >What's on your mind ?</p>
                                </div>
                                <hr>
                                <div >
                                    <div class="formText"><label class="labels">Content :</label>
                                        <textarea style="border-radius: 10px;" name="content" id="" cols="1" rows="2" required></textarea>
                                        <!-- <input type="text" name="content"  placeholder="..." value=""> -->
                                    </div>
                                    <input type="text" value="<%=typeOfUser%>"  name = "userType" hidden>
                                    <input type="number" value="0" name="upVotesCount" hidden>
                                </div>
                                <% if(districtData){%>

                                    <div  id="addMenuInput" style="display: flex; flex-wrap: wrap; justify-content: space-between;">
                                        <div>
                                            <div class="formText"><label class="labels">Restaurant :</label></div>
                                            <select   name="hotel" id="hotelSelect" class="select" required >
                                                
                                                <option  disabled selected>-- Please select a Restaurant--</option>
                                                
                                                <%for (hotel of districtData.hotels) { %>
                                                    
                                                    <% if(hotel.isVisible){ %>
                                                        <option  value= "<%=hotel._id%>">&#9679; <%=hotel.name%> </option>
                                                    <%}
                                                    
                                                }%>
                                                    
                                            </select>   
                                            
                                            <br>
                                        </div>
                                
                                    </div>
                                <%}%>
                                <div >
                                    <div class="formText"><label class="labels">Pic :</label><input style="border-radius: 20px;"  type="file" name="picturePath" value="" required></div>
                                </div>
                                <div style="text-align: center;">
                                    <button type="submit" class="animated-button8">
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                        Submit
                                    </button>
                                    <!-- <div  class="animated-button">
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                        <button type="submit">Submit</button>
                                    </div> -->
                                </div>
                            </div>
                   
                        </div>
                    </form>
                </div>
                <!-- <form action="/posts/?type=<%=typeOfUser%>" id="postForm" method="POST"  autocomplete="off" enctype="multipart/form-data" >
                <div style="display: flex; justify-content: center;">
                    <div style="display: flex;">
                        <div style="margin-right: 100px;">
                            <label class="labels">Content</label>
                        </div>
                        <div>
                            <input type="text" name="content"  placeholder="..." value="">
                        </div>
                        <input type="text" value="<%=typeOfUser%>"  name = "userType" hidden>
                        <input type="number" value="0" name="upVotesCount" hidden>
                    </div>
                </div>
                </form> -->

             
            </div>
        </div>
        
    
    
       
            
        <script src="/assets/js/menuSelect.js"></script>
    
        
    
     <%}else{%>
    
        <div>
            <div style="z-index: 999999;" id="popup-container4">
                <div id="popup-form4">
                    <a  id="close-popup4">&times;</a> 
                         <div  class="container" style="margin-top: 20px;" >
                         <form action="/posts/?type=<%=typeOfUser%>" id="postForm4" method="POST"  autocomplete="off" enctype="multipart/form-data" >
                             <div  >
                                 <div class="">
                                     <div style="text-align: center;">
                                         <p class="formText" >What's on your mind ?</p>
                                     </div>
                                     <div >
                                         <div class="formText"><label class="labels">Content :</label>
                                             <textarea style="border-radius: 10px;" name="content" id="" cols="1" rows="2" required></textarea>
                                             <!-- <input type="text" name="content"  placeholder="..." value=""> -->
                                         </div>
                                         <input type="text" value="<%=typeOfUser%>"  name = "userType" hidden>
                                         <input type="number" value="0" name="upVotesCount" hidden>
                                     </div>
                                     <div >
                                         <div class="formText"><label class="labels">Pic :</label><input style="border-radius: 20px;"  type="file" name="picturePath" value="" required></div> <br>
                                     </div>
                                     <div style="text-align: center;">
                                         <button class="btn btn-primary profile-button" type="submit">Submit</button>
                                     </div>
                                 </div>
                        
                             </div>
                         </form>
                     </div>
                     <!-- <form action="/posts/?type=<%=typeOfUser%>" id="postForm" method="POST"  autocomplete="off" enctype="multipart/form-data" >
                     <div style="display: flex; justify-content: center;">
                         <div style="display: flex;">
                             <div style="margin-right: 100px;">
                                 <label class="labels">Content</label>
                             </div>
                             <div>
                                 <input type="text" name="content"  placeholder="..." value="">
                             </div>
                             <input type="text" value="<%=typeOfUser%>"  name = "userType" hidden>
                             <input type="number" value="0" name="upVotesCount" hidden>
                         </div>
                     </div>
                     </form> -->
     
                  
                 </div>
            </div>
    
        
        </div>
    
     <%}%>
    
      
    
     
    
    <div id="postsAndCarousel" style="margin-bottom: 30px;">
        
        <div>
    
            <ul  style="list-style-type: none;">
                
                <%for(post of postData){%>
                    
                    
                    <%-include('posts')%>
        
                   
                <%}%>
        
        
        
        
            </ul>
            
        
        </div> 
        <div id="r1">
            <div class="carousel-container">
                <% for (var i = 0; i < hotelNames.length; i++) { 
                    if (hotelNames[i].coverPic) {
                        var imageForBack1 = "/uploads/hotelProfile/imagesForBack/" + hotelNames[i].coverPic;
                    } else {
                        var imageForBack1 = "/uploads/hotelProfile/imagesForBack/imageForBack.jpg";
                    }
                    <!-- console.log(imageForBack1) -->
                    %>
                <div <% if (i == 0) { %>class="carousel-item active"<% } else{%> class="carousel-item" <%} %> style="background-image: url('<%= imageForBack1 %>'); ">
                    

                    <!-- image for logo -->
            
                    <% if (hotelNames[i].avatar) {

                        var imageForLogo = "/uploads/hotelProfile/" + hotelNames[i].avatar.split('/').pop();
                        <!-- console.log(imageForLogo) -->
                    } else {
                        var imageForLogo = "/uploads/hotelProfile/logo.png";
                    } %>
                    <div class="logoInCarousel">
                        <img src="<%=imageForLogo%>" width="65" height="65" alt="">
                    </div>
                    <span  class="nameInCarousel"  style="cursor: pointer;" onclick="location.href='/hotel/profile/<%=hotelNames[i].id%>'" >
                        <p><%=hotelNames[i].name%></p>
                    </span>
                </div>

                <% } %>
                <a class="carousel-prev"  style="color: white;">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <a class="carousel-next"  style="color: white;">
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    


        <!-- <div id="r1">
            <div style="height: 100%; overflow-y: scroll;">
                <% for (var hotel of hotelNames){ %>
                    <div style=" margin-top: 1%; padding: 0.5rem; background-color: rgb(22, 137, 237);">
                        <a href="" style="display: flex; ">
                            <span>
                                <img src="<%=hotel.avatar%>" width="32px" height="32px" alt="">
                            </span>
                            <span style="margin-left: 50px; color: black; list-style-type:none;">
                                <p><%=hotel.name%></p>
                            </span>
                        </a>
                    </div>
                <%}%>
            </div>

        </div> -->
    </div>
    
    
    
</div>

    <input  type="checkbox" class="checkbox" id="click" hidden>
    <div class="sidebar">
        <label for="click">
            <div class="menu-icon">
                <div class="line line1"></div>
                <div class="line line2"></div>
                <div class="line line3"></div>
            </div>
        </label>
        <!-- <div class="social-media">
                
                <ul>
                    <li><a href="#" class="social-links"> <i class="fa-brands fa-facebook-square"></i></a></li>

                    <li><a href="#" class="social-links"> <i class="fa-brands fa-instagram" ></i></a></li>

                    <li><a href="#" class="social-links"><i class="fa-brands fa-twitter"></i></a></li>

                    <li><a href="#" class="social-links"><i class="fa-brands fa-google-plus" ></i></a></li>
                </ul>

        </div> -->

        <div class="year"> <p>2023</p></div>

    </div>

    <div class="navigation">

        <div class="nav-header">
            <h1 class="heading-name">RRR</h1>
            <!-- <a href="/" >
                <img src="/uploads/logo.png" alt="" id="HeaderLogo" class="HotelHeaderLogo heading-name">
            </a> -->
            <!-- <form class="form-search">
                <input type="text" name="new" placeholder="search.." class="navigation-input">
                <button class="nav-button">
                    <i class="fas fa-search"></i>
                </button>
            </form> -->
        </div>
        <hr style="border: 1px solid aliceblue; width: 90%;">
        <ul class="navigation-list" style="cursor: pointer;">
            <li class="navigation-item"><span  class="navigation-link">home</span></li>
            <li class="navigation-item"><span   class="navigation-link open-popup5">users</span></li>
            <li class="navigation-item"><span  id="hotelForMedia"   class="navigation-link open-popup6">hotels</span></li>
            <li class="navigation-item"><span   class="navigation-link open-popup7">Feature / Bug</span></li>
            <li class="navigation-item" onclick="location.href='/developer'"><span  class="navigation-link">Developer</span></li>
        </ul>

        <hr style="border: 1px solid aliceblue; width: 90%;">
        <div class="copyright">
            <p>&copy; 2023. RRR</p>
        </div>
    </div>


        
    <!-- <div id="hamDesign">
        <svg class="ham hamRotate ham1" viewBox="0 0 100 100" width="60" onclick="this.classList.toggle('active')">
            <path
                class="lines top"
                d="m 30,33 h 40 c 0,0 9.044436,-0.654587 9.044436,-8.508902 0,-7.854315 -8.024349,-11.958003 -14.89975,-10.85914 -6.875401,1.098863 -13.637059,4.171617 -13.637059,16.368042 v 40" />
            <path
                class="lines middle"
                d="m 30,50 h 40" />
            <path
                class="lines bottom"
                d="m 30,67 h 40 c 12.796276,0 15.357889,-11.717785 15.357889,-26.851538 0,-15.133752 -4.786586,-27.274118 -16.667516,-27.274118 -11.88093,0 -18.499247,6.994427 -18.435284,17.125656 l 0.252538,40" />
        </svg>
    </div> -->


    <!-- script for search -->
    <script src="/assets/js/search.js"></script>


<script src="/assets/js/homepage.js"></script>